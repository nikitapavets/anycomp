$("document").ready(function(){var e=$(".catalog_index_search-line");$(e).find("#openCatalogList").click(function(t){return $(this).toggleClass("active"),$(e).find("#popupMenu").toggleClass("active"),t.preventDefault(),!1}),$(e).find(".menuItems").hover(function(t){return $(e).find(".menuItems").removeClass("active"),$(this).addClass("active"),$(e).find(".sub_menu").removeClass("active"),$(this).parent().next(".sub_menu").addClass("active"),t.preventDefault(),!1}),$(document).click(function(t){$(t.target).closest(".catalog_index_search-line #popupMenu").length||($(e).find("#openCatalogList").removeClass("active"),$(e).find("#popupMenu").removeClass("active"),$(e).find(".sub_menu").removeClass("active"),$(e).find(".menuItems").removeClass("active"))}),{sliders:function(){$(".catalog_index_top-items").removeClass("invisible")}}.sliders();var t={basket:$("#basket"),products:$(".list-items"),openBasket:$(".openBasket"),basketInsert:$(".basketInsert"),basketRemove:$(".basketRemove"),open:function(){"use strict";t.openBasket.click(function(e){return t.basket.toggleClass("hidden"),e.preventDefault(),!1})},close:function(){"use strict";$(document).click(function(e){$(e.target).closest("#basket").length||t.basket.addClass("hidden")})},insert:function(){"use strict";t.basketInsert.click(function(e){$(this).addClass("hidden"),$(this).next(".basketRemove").removeClass("hidden");var a=$(this).parents(".list-item"),i=a.find(".list-item__image--inner img").attr("src"),s=a.find(".list-item__link").attr("href"),n=a.find(".list-item__image--inner img").attr("title"),r=a.find(".price").text(),d=a.data("id"),o=a.data("type"),c=t.products.data("category");return t.store(c,d,function(e){t.basket.find(".basket__items").prepend(t.makeItem(i,s,n,r,d,o,e)),t.remove()}),t.updateTotal(),e.preventDefault(),!1})},remove:function(){"use strict";t.basketRemove.click(function(e){$(this).addClass("hidden"),$(this).prev(".basketInsert").removeClass("hidden");var a=$(this).parents(".list-item"),i=a.data("id"),s=a.data("type");return t.basket.find(".basket__item").each(function(e){if(t.basket.find(".basket__item").eq(e).data("id")==i&&t.basket.find(".basket__item").eq(e).data("type")==s){var a=t.basket.find(".basket__item").eq(e).data("basket");t.basket.find(".basket__item").eq(e).remove(),t.restore(a)}}),e.preventDefault(),!1}),$(".remove-from-basket").click(function(e){var a=$(this).parents(".basket__item"),i=a.data("id"),s=a.data("type");return t.products.find(".list-item").each(function(e){t.products.find(".list-item").eq(e).data("id")==i&&t.products.find(".list-item").eq(e).data("type")==s&&t.products.find(".list-item .basketRemove").eq(e).click()}),t.updateTotal(),e.preventDefault(),!1})},makeItem:function(e,t,a,i,s,n,r){"use strict";return'<div class="basket__item" data-id="'+s+'" data-type="'+n+'" data-basket="'+r+'"><div class="basket__item--img"><a href="'+t+'"><img src="'+e+'" alt="'+a+'" title="'+a+'"></a></div><div class="basket__item--title"><a href="'+t+'">'+a+'</a></div><div class="basket__item--price"><span><span class="price">'+i+'</span><span class="type"> р.</span></span><button class="remove-from-basket">Удалить</button></div><div class="clearfix"></div></div>'},updateTotal:function(){"use strict";var e=0,a=0;t.basket.find(".basket__item .price").each(function(){e+=parseFloat($(this).text()),a++}),t.basket.find(".basket__complex .total").text(e+".00"),t.basket.find(".basket__complex .count").text(a)},store:function(e,a,i){"use strict";$.post("/orders/basket/store",{category_id:e,product_id:a},function(e){i(e),t.updateTotal()})},restore:function(e){$.post("/orders/basket/restore",{basket_item_id:e})},init:function(){$.post("/orders/basket/list",function(e){e.forEach(function(e){t.basket.find(".basket__items").prepend(t.makeItem(e.img,e.link,e.title,e.price,e.id,e.type,e.basket_item_id))}),t.remove(),t.updateTotal()})}};t.init(),t.open(),t.close(),t.insert(),t.remove(),t.updateTotal();var a={gallery:$("#gallery"),generalItem:$("#galleryGeneralItem"),init:function(){a.gallery.find(".gallery__item").hover(function(){a.generalItem.attr("src",$(this).find(".gallery__img").attr("src"))})}};a.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGFsb2dfbW9kdWxlLmpzIl0sIm5hbWVzIjpbIiQiLCJyZWFkeSIsInNlY3Rpb24iLCJmaW5kIiwiY2xpY2siLCJlIiwidGhpcyIsInRvZ2dsZUNsYXNzIiwicHJldmVudERlZmF1bHQiLCJob3ZlciIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwYXJlbnQiLCJuZXh0IiwiZG9jdW1lbnQiLCJldmVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJsZW5ndGgiLCJzbGlkZXJzIiwiQmFza2V0IiwiYmFza2V0IiwicHJvZHVjdHMiLCJvcGVuQmFza2V0IiwiYmFza2V0SW5zZXJ0IiwiYmFza2V0UmVtb3ZlIiwib3BlbiIsImNsb3NlIiwiaW5zZXJ0IiwicHJvZHVjdCIsInBhcmVudHMiLCJpbWciLCJhdHRyIiwibGluayIsInRpdGxlIiwicHJpY2UiLCJ0ZXh0IiwiaWQiLCJkYXRhIiwidHlwZSIsImNhdGVnb3J5X2lkIiwic3RvcmUiLCJiYXNrZXRfaXRlbSIsInByZXBlbmQiLCJtYWtlSXRlbSIsInJlbW92ZSIsInVwZGF0ZVRvdGFsIiwicHJldiIsImVhY2giLCJpIiwiZXEiLCJiYXNrZXRfaXRlbV9pZCIsInJlc3RvcmUiLCJ0b3RhbCIsImNvdW50IiwicGFyc2VGbG9hdCIsInByb2R1Y3RfaWQiLCJjYWxsYmFjayIsInBvc3QiLCJpbml0IiwiYmFza2V0SXRlbXMiLCJmb3JFYWNoIiwiYmFza2V0SXRlbSIsIkdhbGxlcnkiLCJnYWxsZXJ5IiwiZ2VuZXJhbEl0ZW0iXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFLFlBQVlDLE1BQU0sV0FHaEIsR0FBSUMsR0FBVUYsRUFBRSw2QkFDaEJBLEdBQUVFLEdBQVNDLEtBQUssb0JBQW9CQyxNQUFNLFNBQVVDLEdBTWhELE1BSkFMLEdBQUVNLE1BQU1DLFlBQVksVUFDcEJQLEVBQUVFLEdBQVNDLEtBQUssY0FBY0ksWUFBWSxVQUUxQ0YsRUFBRUcsa0JBQ0ssSUFHWFIsRUFBRUUsR0FBU0MsS0FBSyxjQUFjTSxNQUFNLFNBQVVKLEdBUTFDLE1BTkFMLEdBQUVFLEdBQVNDLEtBQUssY0FBY08sWUFBWSxVQUMxQ1YsRUFBRU0sTUFBTUssU0FBUyxVQUNqQlgsRUFBRUUsR0FBU0MsS0FBSyxhQUFhTyxZQUFZLFVBQ3pDVixFQUFFTSxNQUFNTSxTQUFTQyxLQUFLLGFBQWFGLFNBQVMsVUFFNUNOLEVBQUVHLGtCQUNLLElBR1hSLEVBQUVjLFVBQVVWLE1BQU0sU0FBVVcsR0FDcEJmLEVBQUVlLEVBQU1DLFFBQVFDLFFBQVEseUNBQXlDQyxTQUNyRWxCLEVBQUVFLEdBQVNDLEtBQUssb0JBQW9CTyxZQUFZLFVBQ2hEVixFQUFFRSxHQUFTQyxLQUFLLGNBQWNPLFlBQVksVUFDMUNWLEVBQUVFLEdBQVNDLEtBQUssYUFBYU8sWUFBWSxVQUN6Q1YsRUFBRUUsR0FBU0MsS0FBSyxjQUFjTyxZQUFZLGNBTTFDUyxRQUFXLFdBRVBuQixFQUFFLDRCQUE0QlUsWUFBWSxlQUt6Q1MsU0FFVCxJQUFJQyxJQUVBQyxPQUFVckIsRUFBRSxXQUNac0IsU0FBWXRCLEVBQUUsZUFDZHVCLFdBQWN2QixFQUFFLGVBQ2hCd0IsYUFBZ0J4QixFQUFFLGlCQUNsQnlCLGFBQWdCekIsRUFBRSxpQkFFbEIwQixLQUFRLFdBQ0osWUFFQU4sR0FBT0csV0FBV25CLE1BQU0sU0FBVUMsR0FLOUIsTUFIQWUsR0FBT0MsT0FBT2QsWUFBWSxVQUUxQkYsRUFBRUcsa0JBQ0ssS0FJZm1CLE1BQVMsV0FDTCxZQUVBM0IsR0FBRWMsVUFBVVYsTUFBTSxTQUFVVyxHQUNwQmYsRUFBRWUsRUFBTUMsUUFBUUMsUUFBUSxXQUFXQyxRQUN2Q0UsRUFBT0MsT0FBT1YsU0FBUyxhQUkvQmlCLE9BQVUsV0FDTixZQUVBUixHQUFPSSxhQUFhcEIsTUFBTSxTQUFVQyxHQUVoQ0wsRUFBRU0sTUFBTUssU0FBUyxVQUNqQlgsRUFBRU0sTUFBTU8sS0FBSyxpQkFBaUJILFlBQVksU0FDMUMsSUFBSW1CLEdBQVU3QixFQUFFTSxNQUFNd0IsUUFBUSxjQUMxQkMsRUFBTUYsRUFBUTFCLEtBQUssZ0NBQWdDNkIsS0FBSyxPQUN4REMsRUFBT0osRUFBUTFCLEtBQUssb0JBQW9CNkIsS0FBSyxRQUM3Q0UsRUFBUUwsRUFBUTFCLEtBQUssZ0NBQWdDNkIsS0FBSyxTQUMxREcsRUFBUU4sRUFBUTFCLEtBQUssVUFBVWlDLE9BQy9CQyxFQUFLUixFQUFRUyxLQUFLLE1BQ2xCQyxFQUFPVixFQUFRUyxLQUFLLFFBQ3BCRSxFQUFjcEIsRUFBT0UsU0FBU2dCLEtBQUssV0FTdkMsT0FSQWxCLEdBQU9xQixNQUFNRCxFQUFhSCxFQUFJLFNBQVVLLEdBQ3BDdEIsRUFBT0MsT0FBT2xCLEtBQUssa0JBQWtCd0MsUUFBUXZCLEVBQU93QixTQUFTYixFQUFLRSxFQUFNQyxFQUFPQyxFQUFPRSxFQUFJRSxFQUFNRyxJQUNoR3RCLEVBQU95QixXQUlYekIsRUFBTzBCLGNBQ1B6QyxFQUFFRyxrQkFDSyxLQUtmcUMsT0FBVSxXQUNOLFlBRUF6QixHQUFPSyxhQUFhckIsTUFBTSxTQUFVQyxHQUVoQ0wsRUFBRU0sTUFBTUssU0FBUyxVQUNqQlgsRUFBRU0sTUFBTXlDLEtBQUssaUJBQWlCckMsWUFBWSxTQUUxQyxJQUFJbUIsR0FBVTdCLEVBQUVNLE1BQU13QixRQUFRLGNBQzFCTyxFQUFLUixFQUFRUyxLQUFLLE1BQ2xCQyxFQUFPVixFQUFRUyxLQUFLLE9BWXhCLE9BVkFsQixHQUFPQyxPQUFPbEIsS0FBSyxpQkFBaUI2QyxLQUFLLFNBQVVDLEdBQy9DLEdBQUk3QixFQUFPQyxPQUFPbEIsS0FBSyxpQkFBaUIrQyxHQUFHRCxHQUFHWCxLQUFLLE9BQVNELEdBQ3hEakIsRUFBT0MsT0FBT2xCLEtBQUssaUJBQWlCK0MsR0FBR0QsR0FBR1gsS0FBSyxTQUFXQyxFQUFNLENBQ2hFLEdBQUlZLEdBQWlCL0IsRUFBT0MsT0FBT2xCLEtBQUssaUJBQWlCK0MsR0FBR0QsR0FBR1gsS0FBSyxTQUNwRWxCLEdBQU9DLE9BQU9sQixLQUFLLGlCQUFpQitDLEdBQUdELEdBQUdKLFNBQzFDekIsRUFBT2dDLFFBQVFELE1BSXZCOUMsRUFBRUcsa0JBQ0ssSUFHWFIsRUFBRSx1QkFBdUJJLE1BQU0sU0FBVUMsR0FFckMsR0FBSXdCLEdBQVU3QixFQUFFTSxNQUFNd0IsUUFBUSxpQkFDMUJPLEVBQUtSLEVBQVFTLEtBQUssTUFDbEJDLEVBQU9WLEVBQVFTLEtBQUssT0FXeEIsT0FUQWxCLEdBQU9FLFNBQVNuQixLQUFLLGNBQWM2QyxLQUFLLFNBQVVDLEdBQzFDN0IsRUFBT0UsU0FBU25CLEtBQUssY0FBYytDLEdBQUdELEdBQUdYLEtBQUssT0FBU0QsR0FDdkRqQixFQUFPRSxTQUFTbkIsS0FBSyxjQUFjK0MsR0FBR0QsR0FBR1gsS0FBSyxTQUFXQyxHQUN6RG5CLEVBQU9FLFNBQVNuQixLQUFLLDRCQUE0QitDLEdBQUdELEdBQUc3QyxVQUkvRGdCLEVBQU8wQixjQUNQekMsRUFBRUcsa0JBQ0ssS0FJZm9DLFNBQVksU0FBVWIsRUFBS0UsRUFBTUMsRUFBT0MsRUFBT0UsRUFBSUUsRUFBTUcsR0FDckQsWUFFQSxPQUNJLHNDQUF3Q0wsRUFBSyxnQkFBa0JFLEVBQU8sa0JBQW9CRyxFQUFjLDZDQUUxRlQsRUFBTyxlQUNORixFQUFNLFVBQVlHLEVBQVEsWUFBY0EsRUFBUSx5REFHaEJELEVBQU8sS0FBT0MsRUFBUSx3RUFHNUNDLEVBQVEsMElBU3pDVyxZQUFlLFdBQ1gsWUFFQSxJQUFJTyxHQUFRLEVBQ1JDLEVBQVEsQ0FDWmxDLEdBQU9DLE9BQU9sQixLQUFLLHdCQUF3QjZDLEtBQUssV0FDNUNLLEdBQVNFLFdBQVd2RCxFQUFFTSxNQUFNOEIsUUFDNUJrQixNQUVKbEMsRUFBT0MsT0FBT2xCLEtBQUssMkJBQTJCaUMsS0FBS2lCLEVBQVEsT0FDM0RqQyxFQUFPQyxPQUFPbEIsS0FBSywyQkFBMkJpQyxLQUFLa0IsSUFHdkRiLE1BQVMsU0FBVUQsRUFBYWdCLEVBQVlDLEdBQ3hDLFlBRUF6RCxHQUFFMEQsS0FBSyx3QkFFQ2xCLFlBQWVBLEVBQ2ZnQixXQUFjQSxHQUNmLFNBQVVMLEdBQ1RNLEVBQVNOLEdBQ1QvQixFQUFPMEIsaUJBSW5CTSxRQUFXLFNBQVVELEdBRWpCbkQsRUFBRTBELEtBQUssMEJBRUNQLGVBQWtCQSxLQUk5QlEsS0FBUSxXQUVKM0QsRUFBRTBELEtBQUssc0JBQXVCLFNBQVVFLEdBRXBDQSxFQUFZQyxRQUFRLFNBQVVDLEdBQzFCMUMsRUFBT0MsT0FBT2xCLEtBQUssa0JBQWtCd0MsUUFBUXZCLEVBQU93QixTQUNoRGtCLEVBQVcvQixJQUNYK0IsRUFBVzdCLEtBQ1g2QixFQUFXNUIsTUFDWDRCLEVBQVczQixNQUNYMkIsRUFBV3pCLEdBQ1h5QixFQUFXdkIsS0FDWHVCLEVBQVdYLG1CQUVuQi9CLEVBQU95QixTQUNQekIsRUFBTzBCLGlCQUtuQjFCLEdBQU91QyxPQUNQdkMsRUFBT00sT0FDUE4sRUFBT08sUUFDUFAsRUFBT1EsU0FDUFIsRUFBT3lCLFNBQ1B6QixFQUFPMEIsYUFFUCxJQUFJaUIsSUFDQUMsUUFBV2hFLEVBQUUsWUFDYmlFLFlBQWVqRSxFQUFFLHVCQUVqQjJELEtBQVEsV0FDSkksRUFBUUMsUUFBUTdELEtBQUssa0JBQWtCTSxNQUFNLFdBQ3pDc0QsRUFBUUUsWUFBWWpDLEtBQUssTUFBT2hDLEVBQUVNLE1BQU1ILEtBQUssaUJBQWlCNkIsS0FBSyxXQUkvRStCLEdBQVFKIiwiZmlsZSI6ImNhdGFsb2dfbW9kdWxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoJ2RvY3VtZW50JykucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgLy9jYXRhbG9nX2luZGV4X3NlYXJjaC1saW5lXG4gICAgdmFyIHNlY3Rpb24gPSAkKCcuY2F0YWxvZ19pbmRleF9zZWFyY2gtbGluZScpO1xuICAgICQoc2VjdGlvbikuZmluZCgnI29wZW5DYXRhbG9nTGlzdCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnI3BvcHVwTWVudScpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgICQoc2VjdGlvbikuZmluZCgnLm1lbnVJdGVtcycpLmhvdmVyKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgJChzZWN0aW9uKS5maW5kKCcubWVudUl0ZW1zJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJChzZWN0aW9uKS5maW5kKCcuc3ViX21lbnUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykucGFyZW50KCkubmV4dCgnLnN1Yl9tZW51JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChcIi5jYXRhbG9nX2luZGV4X3NlYXJjaC1saW5lICNwb3B1cE1lbnVcIikubGVuZ3RoKSByZXR1cm47XG4gICAgICAgICQoc2VjdGlvbikuZmluZCgnI29wZW5DYXRhbG9nTGlzdCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJChzZWN0aW9uKS5maW5kKCcjcG9wdXBNZW51JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHNlY3Rpb24pLmZpbmQoJy5zdWJfbWVudScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJChzZWN0aW9uKS5maW5kKCcubWVudUl0ZW1zJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG5cbiAgICB2YXIgTGF6eUxvYWQgPSB7XG5cbiAgICAgICAgJ3NsaWRlcnMnOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICQoJy5jYXRhbG9nX2luZGV4X3RvcC1pdGVtcycpLnJlbW92ZUNsYXNzKCdpbnZpc2libGUnKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuICAgIExhenlMb2FkLnNsaWRlcnMoKTtcblxuICAgIHZhciBCYXNrZXQgPSB7XG5cbiAgICAgICAgJ2Jhc2tldCc6ICQoJyNiYXNrZXQnKSxcbiAgICAgICAgJ3Byb2R1Y3RzJzogJCgnLmxpc3QtaXRlbXMnKSxcbiAgICAgICAgJ29wZW5CYXNrZXQnOiAkKCcub3BlbkJhc2tldCcpLFxuICAgICAgICAnYmFza2V0SW5zZXJ0JzogJCgnLmJhc2tldEluc2VydCcpLFxuICAgICAgICAnYmFza2V0UmVtb3ZlJzogJCgnLmJhc2tldFJlbW92ZScpLFxuXG4gICAgICAgICdvcGVuJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIEJhc2tldC5vcGVuQmFza2V0LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICBCYXNrZXQuYmFza2V0LnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAnY2xvc2UnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiI2Jhc2tldFwiKS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICAgICAgICBCYXNrZXQuYmFza2V0LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdpbnNlcnQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgQmFza2V0LmJhc2tldEluc2VydC5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCcuYmFza2V0UmVtb3ZlJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gJCh0aGlzKS5wYXJlbnRzKCcubGlzdC1pdGVtJyk7XG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IHByb2R1Y3QuZmluZCgnLmxpc3QtaXRlbV9faW1hZ2UtLWlubmVyIGltZycpLmF0dHIoJ3NyYycpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gcHJvZHVjdC5maW5kKCcubGlzdC1pdGVtX19saW5rJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IHByb2R1Y3QuZmluZCgnLmxpc3QtaXRlbV9faW1hZ2UtLWlubmVyIGltZycpLmF0dHIoJ3RpdGxlJyk7XG4gICAgICAgICAgICAgICAgdmFyIHByaWNlID0gcHJvZHVjdC5maW5kKCcucHJpY2UnKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gcHJvZHVjdC5kYXRhKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcHJvZHVjdC5kYXRhKCd0eXBlJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gQmFza2V0LnByb2R1Y3RzLmRhdGEoJ2NhdGVnb3J5Jyk7XG4gICAgICAgICAgICAgICAgQmFza2V0LnN0b3JlKGNhdGVnb3J5X2lkLCBpZCwgZnVuY3Rpb24gKGJhc2tldF9pdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIEJhc2tldC5iYXNrZXQuZmluZCgnLmJhc2tldF9faXRlbXMnKS5wcmVwZW5kKEJhc2tldC5tYWtlSXRlbShpbWcsIGxpbmssIHRpdGxlLCBwcmljZSwgaWQsIHR5cGUsIGJhc2tldF9pdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIEJhc2tldC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgQmFza2V0LnVwZGF0ZVRvdGFsKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgJ3JlbW92ZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgICAgICBCYXNrZXQuYmFza2V0UmVtb3ZlLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnByZXYoJy5iYXNrZXRJbnNlcnQnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9ICQodGhpcykucGFyZW50cygnLmxpc3QtaXRlbScpO1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IHByb2R1Y3QuZGF0YSgnaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHByb2R1Y3QuZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtJykuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtJykuZXEoaSkuZGF0YSgnaWQnKSA9PSBpZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtJykuZXEoaSkuZGF0YSgndHlwZScpID09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNrZXRfaXRlbV9pZCA9IEJhc2tldC5iYXNrZXQuZmluZCgnLmJhc2tldF9faXRlbScpLmVxKGkpLmRhdGEoJ2Jhc2tldCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtJykuZXEoaSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNrZXQucmVzdG9yZShiYXNrZXRfaXRlbV9pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnLnJlbW92ZS1mcm9tLWJhc2tldCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9ICQodGhpcykucGFyZW50cygnLmJhc2tldF9faXRlbScpO1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IHByb2R1Y3QuZGF0YSgnaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHByb2R1Y3QuZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgQmFza2V0LnByb2R1Y3RzLmZpbmQoJy5saXN0LWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChCYXNrZXQucHJvZHVjdHMuZmluZCgnLmxpc3QtaXRlbScpLmVxKGkpLmRhdGEoJ2lkJykgPT0gaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhc2tldC5wcm9kdWN0cy5maW5kKCcubGlzdC1pdGVtJykuZXEoaSkuZGF0YSgndHlwZScpID09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhc2tldC5wcm9kdWN0cy5maW5kKCcubGlzdC1pdGVtIC5iYXNrZXRSZW1vdmUnKS5lcShpKS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBCYXNrZXQudXBkYXRlVG90YWwoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ21ha2VJdGVtJzogZnVuY3Rpb24gKGltZywgbGluaywgdGl0bGUsIHByaWNlLCBpZCwgdHlwZSwgYmFza2V0X2l0ZW0pIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgICAgICByZXR1cm4gJycgK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYmFza2V0X19pdGVtXCIgZGF0YS1pZD1cIicgKyBpZCArICdcIiBkYXRhLXR5cGU9XCInICsgdHlwZSArICdcIiBkYXRhLWJhc2tldD1cIicgKyBiYXNrZXRfaXRlbSArICdcIj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJhc2tldF9faXRlbS0taW1nXCI+JyArXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCInICsgbGluayArICdcIj4nICtcbiAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInICsgaW1nICsgJ1wiIGFsdD1cIicgKyB0aXRsZSArICdcIiB0aXRsZT1cIicgKyB0aXRsZSArICdcIj4nICtcbiAgICAgICAgICAgICAgICAnPC9hPicgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJhc2tldF9faXRlbS0tdGl0bGVcIj48YSBocmVmPVwiJyArIGxpbmsgKyAnXCI+JyArIHRpdGxlICsgJzwvYT48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJhc2tldF9faXRlbS0tcHJpY2VcIj4nICtcbiAgICAgICAgICAgICAgICAnPHNwYW4+JyArXG4gICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicHJpY2VcIj4nICsgcHJpY2UgKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInR5cGVcIj4g0YAuPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJyZW1vdmUtZnJvbS1iYXNrZXRcIj7Qo9C00LDQu9C40YLRjDwvYnV0dG9uPicgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgICAgJzwvZGl2Pic7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ3VwZGF0ZVRvdGFsJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtIC5wcmljZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IHBhcnNlRmxvYXQoJCh0aGlzKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEJhc2tldC5iYXNrZXQuZmluZCgnLmJhc2tldF9fY29tcGxleCAudG90YWwnKS50ZXh0KHRvdGFsICsgJy4wMCcpO1xuICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19jb21wbGV4IC5jb3VudCcpLnRleHQoY291bnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgICdzdG9yZSc6IGZ1bmN0aW9uIChjYXRlZ29yeV9pZCwgcHJvZHVjdF9pZCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgICAgICAkLnBvc3QoJy9vcmRlcnMvYmFza2V0L3N0b3JlJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICAgICAgICAncHJvZHVjdF9pZCc6IHByb2R1Y3RfaWQsXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGJhc2tldF9pdGVtX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJhc2tldF9pdGVtX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgQmFza2V0LnVwZGF0ZVRvdGFsKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ3Jlc3RvcmUnOiBmdW5jdGlvbiAoYmFza2V0X2l0ZW1faWQpIHtcblxuICAgICAgICAgICAgJC5wb3N0KCcvb3JkZXJzL2Jhc2tldC9yZXN0b3JlJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICdiYXNrZXRfaXRlbV9pZCc6IGJhc2tldF9pdGVtX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdpbml0JzogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAkLnBvc3QoJy9vcmRlcnMvYmFza2V0L2xpc3QnLCBmdW5jdGlvbiAoYmFza2V0SXRlbXMpIHtcblxuICAgICAgICAgICAgICAgIGJhc2tldEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGJhc2tldEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgQmFza2V0LmJhc2tldC5maW5kKCcuYmFza2V0X19pdGVtcycpLnByZXBlbmQoQmFza2V0Lm1ha2VJdGVtKFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFza2V0SXRlbS5pbWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNrZXRJdGVtLmxpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNrZXRJdGVtLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFza2V0SXRlbS5wcmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2tldEl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNrZXRJdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNrZXRJdGVtLmJhc2tldF9pdGVtX2lkKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgQmFza2V0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIEJhc2tldC51cGRhdGVUb3RhbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBCYXNrZXQuaW5pdCgpO1xuICAgIEJhc2tldC5vcGVuKCk7XG4gICAgQmFza2V0LmNsb3NlKCk7XG4gICAgQmFza2V0Lmluc2VydCgpO1xuICAgIEJhc2tldC5yZW1vdmUoKTtcbiAgICBCYXNrZXQudXBkYXRlVG90YWwoKTtcblxuICAgIHZhciBHYWxsZXJ5ID0ge1xuICAgICAgICAnZ2FsbGVyeSc6ICQoJyNnYWxsZXJ5JyksXG4gICAgICAgICdnZW5lcmFsSXRlbSc6ICQoJyNnYWxsZXJ5R2VuZXJhbEl0ZW0nKSxcblxuICAgICAgICAnaW5pdCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIEdhbGxlcnkuZ2FsbGVyeS5maW5kKCcuZ2FsbGVyeV9faXRlbScpLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBHYWxsZXJ5LmdlbmVyYWxJdGVtLmF0dHIoJ3NyYycsICQodGhpcykuZmluZCgnLmdhbGxlcnlfX2ltZycpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBHYWxsZXJ5LmluaXQoKTtcblxufSk7Il19
