"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$("document").ready(function(){function e(){var e="";$(".dual_selects__second option").each(function(t){e+=$(".dual_selects__second option").eq(t).val()+","}),$("#techStatuses").val(e)}function t(e,t,n,a,i,d){$(c).find(".title").text(e),$(c).find(".content .text").text(t),"create"==n?(""!=i&&($(c).find(".create."+i).removeClass("hidden"),$(c).find(".create").addClass("hidden")),$(c).find(".create").removeClass("hidden"),$(c).find(".create form").attr("action",a),$(c).find(".delete").addClass("hidden"),$(c).find(".edit").addClass("hidden"),$(c).find(".select").addClass("hidden")):"delete"==n?($(c).find(".create").addClass("hidden"),$(c).find(".delete").removeClass("hidden"),$(c).find(".delete form").attr("action",a),$(c).find(".edit").addClass("hidden"),$(c).find(".select").addClass("hidden")):"edit"==n?($(c).find(".create").addClass("hidden"),$(c).find(".delete").addClass("hidden"),$(c).find(".edit").removeClass("hidden"),$(c).find(".edit form").attr("action",a),$(c).find(".select").addClass("hidden")):"select"==n&&($(c).find(".create").addClass("hidden"),$(c).find(".delete").addClass("hidden"),$(c).find(".edit").addClass("hidden"),$(c).find(".select").removeClass("hidden"),$(c).find(".select form").attr("action",a),$(c).find(".select form option").each(function(e){$(c).find(".select form option").eq(e).val()==d&&($(c).find(".select form option").eq(e).attr("selected","selected"),$(c).find(".select form .selector span").text($(c).find(".select form option").eq(e).text()))})),c.removeClass("hidden")}function n(e){if(!e)return void $("#addError").html("");if(a(e)){if(e.length>0)for(var t=0;t<e.length;t++){var n='<div class="admin-panel__notes warning" id="addTechError"><p><strong>Внимание:</strong><span class="descr">'+e[t]+"</span></p></div>",i=$("#addError").html();$("#addError").html(i+n)}}else{var n='<div class="admin-panel__notes warning"><p><strong>Внимание:</strong><span class="descr">'+e+"</span></p></div>";$("#addError").html(n)}}function a(e){return"object"==(void 0===e?"undefined":_typeof(e))&&e instanceof Array}function i(e){var t=e;t.pos=-1,$("ul.tabs a").each(function(n){this==e&&(t.pos=n)}),$("ul.tabs a").removeClass("active"),$(e).addClass("active"),$("table.tabs .tab").addClass("hidden"),$("table.tabs .tab").eq(t.pos).removeClass("hidden"),$(".dynamic-table__stats.tabs .tab").addClass("hidden"),$(".dynamic-table__stats.tabs .tab").eq(t.pos).removeClass("hidden")}var d={uploader:function(){$(".uploader input").focus(function(e){$(this).parent().find(".upload-files").removeClass("hidden")}),$(".uploader input").on("change",function(e,t,n){var a=this.value.replace(/\\/g,"/").replace(/.*\//,"");$(this).next(".filename").text(a)})},fileUploader:function(){$(document).click(function(e){$(e.target).closest(".upload-files__area").length||$(e.target).closest("input").length||$(e.target).closest(".upload-files__area .admin-panel__buttons").length||$(".upload-files").addClass("hidden")})},ajaxUploadSingleImage:function(){$(".uploaderSingleImage").each(function(e,t){var n=$(t),a=n.find("#UploadSingleImage"),i=n.find(".loader"),s=n.find(".error");a.length&&(new AjaxUpload(a,{action:"/upload/files",name:"uploadfile",onSubmit:function(e,t){return s.text(""),t&&/^(jpg|png|jpeg|gif)$/.test(t)?n.find(".item").length>=1?(s.text("Превышено максимальное колличество файлов."),!1):void i.removeClass("hidden"):(s.text("Поддерживаемые форматы: jpg, png, gif."),!1)},onComplete:function(e,t){var a='<div class="item"><images src="'+t+'" data-link="'+t+'"> <a href="javascript:;" class="cross"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#cross_ff491f"></use></svg></a></div>';n.find(".items").append(a),i.addClass("hidden"),d.updateUploadFiles(n),d.deleteUploadFiles(n)}}),d.deleteUploadFiles(n))})},ajaxUploader:function(){$(".uploaderMultiImage").each(function(e,t){var n=$(t),a=n.find("#UploadFiles"),i=a.find(".loader"),s=a.find(".error");a.length&&(new AjaxUpload(a,{action:"/upload/files",name:"uploadfile",onSubmit:function(e,t){return s.text(""),t&&/^(jpg|png|jpeg|gif)$/.test(t)?n.find(".item").length>=12?(s.text("Превышено максимальное колличество файлов."),!1):void i.removeClass("hidden"):(s.text("Поддерживаемые форматы: jpg, png, gif."),!1)},onComplete:function(e,t){var a='<div class="item"><images src="'+t+'" data-link="'+t+'"> <a href="javascript:;" class="cross"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#cross_ff491f"></use></svg></a></div>';n.find(".items").append(a),i.addClass("hidden"),d.updateUploadFiles(n),d.deleteUploadFiles(n)}}),d.deleteUploadFiles(n))})},updateUploadFiles:function(e){var t=[];e.find(".item").each(function(n){t.push(e.find(".item images").eq(n).data("link"))}),e.find(".inp_img").val(t.join(",")),0==e.find(".item").length?e.find(".filename").text("Файлы не выбраны"):e.find(".filename").text("Выбрано файлов: "+e.find(".item").length)},deleteUploadFiles:function(e){e.find(".cross").click(function(t){return $(this).parent().remove(),d.updateUploadFiles(e),t.preventDefault(),!1})},adminChosen:function(){var e=[],t=[],n=[],a=[],i=[];$(".admin-chosen").each(function(d,s){e[d]=$(s),t[d]=e[d].find(".admin-chosen__area"),n[d]=e[d].find(".admin-chosen__drop"),a[d]=e[d].find(".admin-chosen__drop--item"),i[d]=e[d].find(".admin-chosen__input"),t[d].click(function(){var e=0;a[d].each(function(t){a[d].eq(t).hasClass("hidden")&&e++}),e!=a[d].length&&n[d].removeClass("hidden")});var l=function(){e[d].find(".close").click(function(){$(this).parent().remove();var e=$(this).parent().find("span").text();a[d].each(function(t){a[d].eq(t).text()==e&&a[d].eq(t).removeClass("hidden")}),o()})};l();var o=function(){var e=[];a[d].each(function(t){a[d].eq(t).hasClass("hidden")&&e.push(a[d].eq(t).data("id"))}),i[d].val(e.join(","))};o(),a[d].click(function(){var e=$(this).text(),a='<li class="admin-chosen__area--item"> <span>'+e+'</span> <a href="javascript:;" class="close"></a> </li>';t[d].append(a),n[d].addClass("hidden"),$(this).addClass("hidden"),l(),o()}),$(document).click(function(e){$(e.target).closest(".admin-chosen__drop").length||$(e.target).closest(".admin-chosen__area").length||n[d].addClass("hidden")})})}};d.fileUploader(),d.uploader(),d.ajaxUploader(),d.ajaxUploadSingleImage(),d.adminChosen(),$(".admin-panel__left-side--menu .menu-item").click(function(e){$(this).toggleClass("active"),$(this).next("ul.sub").slideToggle("fast")}),$(".admin-panel__left-side--menu .menu-item-sub").click(function(e){$(".admin-panel__left-side--menu .menu-item-sub").each(function(e){$(this).parent().removeClass("active")}),$(this).parent().addClass("active")});var s={};s.onlyRussian=function(e){var t=/^[А-Я|ё| ]+$/i;return-1!=e.search(t)},s.isEmpty=function(e){return isNaN(e)?""==e.trim():0==e},$(".inp_select").change(function(e){$(this).prev("span").text($(this).find("option:selected").text())}),$(".admin-panel__checker input").click(function(e){$(this).parent("span").toggleClass("checked")}),$(".inp_plus").click(function(e){$(this).parent().next().removeClass("hidden"),$(this).addClass("hidden")}),$(".dual_selects__stof").click(function(t){var n=$(".dual_selects__second option:selected");$(".dual_selects__first").append(n),e(),t.preventDefault()}),$(".dual_selects__alltof").click(function(t){var n=$(".dual_selects__second option");n.each(function(e){$(".dual_selects__first").append(n[e])}),e(),t.preventDefault()}),$(".dual_selects__ftos").click(function(t){var n=$(".dual_selects__first option:selected");$(".dual_selects__second").append(n),e(),t.preventDefault()}),$(".dual_selects__alltos").click(function(t){var n=$(".dual_selects__first option");n.each(function(e){$(".dual_selects__second").append(n[e])}),e(),t.preventDefault()}),$(".formNextBtn").click(function(e){if($(this).hasClass("disabled"))return e.preventDefault(),!1;var t=$(".blockForm"),n=$(this).data("pos"),a=$(t).find(".admin-panel__widget").eq(parseInt(n)),i=[];$(a).find(".fieldForValidate").each(function(e){var t=a.find(".fieldForValidate").eq(e),n=$(a).find(".fieldForValidate").eq(e).text(),d=$(a).find(".fieldForValidate").eq(e).data("type"),l=$(a).find(".fieldForValidate").eq(e).parent().next(".widget-row__right").find("input").val(),o=parseInt($(a).find(".fieldForValidate").eq(e).parent().next(".widget-row__right").find("select").val()),r=l||o||"";if(s.isEmpty(r))"require"==$(t).data("require")&&(i.push("Необходимо заполнить поле '"+n+"'."),$(a).find(".required").eq(e).parent().next(".widget-row__right").find("input").val(""));else switch(d){case"only_rus":s.onlyRussian(r)||i.push("Поле '"+n+"' может состоять только из русских символов.")}});var d=$("#blockErrors");if($(d).html(""),i.length>0){for(var l=0;l<i.length;l++){var o='<div class="admin-panel__notes warning" id="addTechError"><p><strong>Внимание:</strong><span class="descr">'+i[l]+"</span></p></div>",r=$(d).html();$(d).html(r+o)}return e.preventDefault(),!1}return n==$(".formNextBtn.top").length-1?($(".formNextBtn.top").eq(n).addClass("disabled"),!0):($(t).find(".admin-panel__widget").addClass("hidden"),$(t).find(".admin-panel__widget").eq(n+1).removeClass("hidden"),$(".formNextBtn.top").parent().addClass("hidden"),$(".formNextBtn.top").eq(n+1).parent().removeClass("hidden"),n==$(".formNextBtn.bottom").length-1?($(".formNextBtn.bottom").eq(n).addClass("disabled"),!0):($(t).find(".admin-panel__widget").addClass("hidden"),$(t).find(".admin-panel__widget").eq(n+1).removeClass("hidden"),$(".formNextBtn.bottom").parent().addClass("hidden"),$(".formNextBtn.bottom").eq(n+1).parent().removeClass("hidden"),e.preventDefault(),!1))}),$(".formBackBtn").click(function(e){var t=$(this).data("pos"),n=$(".blockForm");return $(n).find(".admin-panel__widget").addClass("hidden"),$(n).find(".admin-panel__widget").eq(t-1).removeClass("hidden"),$(".formNextBtn.top").parent().addClass("hidden"),$(".formNextBtn.top").eq(t-1).parent().removeClass("hidden"),$(".formNextBtn.bottom").parent().addClass("hidden"),$(".formNextBtn.bottom").eq(t-1).parent().removeClass("hidden"),e.preventDefault(),!1});var l=$("#clientInfo"),o=$("#techInfo"),r=$("#statusesInfo");$("#addTechNextClientBtn").click(function(e){var t=[],n=$("#clientLastName").val(),a=$("#clientFirstName").val(),i=$("#clientFatherName").val(),d=$("#clientPhoneNumber").val(),r=$("#clientCity").val(),c=$("#clientStreet").val();$("#clientHouseNumber").val(),$("#clientFlatNumber").val();if(""==n?t.push("Необходимо заполнить поле 'Фамилия'."):s.onlyRussian(n)||t.push("Фамилия может состоять только из русских символов."),""==a?t.push("Необходимо заполнить поле 'Имя'."):s.onlyRussian(a)||t.push("Имя может состоять только из русских символов."),""==i?t.push("Необходимо заполнить поле 'Отчество'."):s.onlyRussian(i)||t.push("Отчество может состоять только из русских символов."),""==d&&t.push("Необходимо заполнить поле 'Номер телефона'."),""==r||s.onlyRussian(r)||t.push("Название города может состоять только из русских символов."),""==c||s.onlyRussian(c)||t.push("Название улицы может состоять только из русских символов."),$("#addTechError").html(""),t.length>0)for(var h=0;h<t.length;h++){var f='<div class="admin-panel__notes warning" id="addTechError"><p><strong>Внимание:</strong><span class="descr">'+t[h]+"</span></p></div>",p=$("#addTechError").html();$("#addTechError").html(p+f)}else l.addClass("hidden"),o.removeClass("hidden");e.preventDefault()}),$("#addTechNextTechBtn").click(function(t){var n=[],a=$("#techCategory").val(),i=$("#techCategoryNew").val(),d=$("#techBrand").val(),s=$("#techBrandNew").val(),l=$("#techTitle").val(),c=$("#techWorker").val();if(0==a&&""==i&&n.push("Необходимо выбрать категорию из поля 'Категория'."),0==d&&""==s&&n.push("Необходимо выбрать бренд из поля 'Бренд'."),""==l&&n.push("Необходимо заполнить поле 'Название'."),""==c&&n.push("Необходимо выбрать принимающего из поля 'Принял в ремонт'."),$("#addTechError").html(""),n.length>0)for(var h=0;h<n.length;h++){var f='<div class="admin-panel__notes warning" id="addTechError"><p><strong>Внимание:</strong><span class="descr">'+n[h]+"</span></p></div>",p=$("#addTechError").html();$("#addTechError").html(p+f)}else o.addClass("hidden"),r.removeClass("hidden"),e();t.preventDefault()}),$("#addTechPrevTechBtn").click(function(e){o.addClass("hidden"),l.removeClass("hidden"),e.preventDefault()}),$("#addTechPrevStatusBtn").click(function(e){r.addClass("hidden"),o.removeClass("hidden"),e.preventDefault()}),$(".mainChecker input").change(function(e){$(this).parent("span").hasClass("checked")?$(".subChecker").each(function(e){$(".subChecker").eq(e).addClass("checked")}):$(".subChecker").each(function(e){$(".subChecker").eq(e).removeClass("checked")})}),$(".subChecker input").change(function(e){$(".subChecker.checked").length==$(".subChecker").length?$(".mainChecker").addClass("checked"):$(".mainChecker").removeClass("checked")}),$(".DBDeleteBtn").click(function(e){var t="";$(".subChecker.checked").each(function(e){t+=","+$(this).data("id")}),t.length&&(t=t.slice(1)),$("#deleteItems").val(t)}),$("#popupNo").click(function(e){c.addClass("hidden")}),$(".DBDeleteBtn").click(function(e){var a=$(".subChecker.checked").length;if(a>0){t("Удаление элемента","Вы уверены, что хотите удалить элементы из списка? ("+a+"шт.)","delete",$(this).data("action")),n("")}else{n("Выберите хотя бы один элемент для удаления.")}}),$(".DBAddBtn").click(function(e){t("Добавление элемента","Укажите, название нового элемента.","create",$(this).data("action"),$(this).data("types"))}),$(".DBEditBtn").click(function(e){var n=$(this).prev("span").text();$("#editItemName").val(n);var a=$(this).data("id"),i=$(".DBEditBtnInline").data("action"),d=$(this).data("types");$("#editItemId").val(a),t("Изменение элемента","Укажите, новое название элемента.","edit",i,d)}),$(".popUp__changeStatus").click(function(e){var n=$(this).data("action"),a=$(this).data("id"),i=$(this).data("selected");$("#selectItemId").val(a),t("Изменение элемента","Выберите новое значение элемента.","select",n,$(this).data("types"),i)});var c=$(".admin-panel__popup.database");$("ul.tabs a").click(function(e){i(this)}),{shopPopupWithDetailedDescription:function(){$(".shopPopupWithDetailedDescription").click(function(e){return $(".shopPopupWithDetailedDescription").next(".additional-info").addClass("hidden"),$(this).next(".additional-info").toggleClass("hidden"),e.preventDefault(),!1}),$(document).click(function(e){$(e.target).closest(".additional-info").length||$(".shopPopupWithDetailedDescription").next(".additional-info").addClass("hidden")})}}.shopPopupWithDetailedDescription()});
"use strict";$("document").ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".inp_phone").mask("+375 (99) 999-99-99"),$(".inp_home_phone").mask("+375 (9999) 9-99-99"),{checkBox:function(){$(".gui_checkbox").parent().click(function(){$(this).find(".checkbox").toggleClass("active")})}}.checkBox()});
"use strict";!function(){var e=$("#chooseClientField"),a=$(".choose-client__client"),t=$("#chooseClientNotFound"),n=$("#clientInfo"),i=$("#chooseClientAddOrder");e.keyup(function(e){o(e.target.value)}),$.each(a,function(e,a){$(a).click(function(){d(a)})});var d=function(e){$.each(a,function(e,a){$(a).removeClass("active")}),$(e).addClass("active"),n.find("#clientInfoSecondName").text($(e).data("second_name")?$(e).data("second_name"):"-"),n.find("#clientInfoFirstName").text($(e).data("first_name")?$(e).data("first_name"):"-"),n.find("#clientInfoFatherName").text($(e).data("father_name")?$(e).data("father_name"):"-"),n.find("#clientInfoOrganization").text($(e).data("organization")?$(e).data("organization"):"-"),n.find("#clientInfoMobilePhone").text($(e).data("mobile_phone")?$(e).data("mobile_phone"):"-"),n.find("#clientInfoHomePhone").text($(e).data("home_phone")?$(e).data("home_phone"):"-"),n.find("#clientInfoAddress").text($(e).data("address")?$(e).data("address"):"-"),n.find("#clientInfoRepairs").text($(e).data("repairs")?$(e).data("repairs"):"-"),n.find("#clientInfoLastRepair").text($(e).data("last-repair")?$(e).data("last-repair"):"-"),i.attr("href",i.attr("href").substr(0,i.attr("href").indexOf("client_id=")+"client_id=".length)+$(e).data("id"))},o=function(e){e=e.toLowerCase();var n=-1;$.each(a,function(t,i){var o=-1,r=$(i).data("first_name").toLowerCase();o=($(i).data("second_name").toLowerCase()+" "+r+" "+$(i).data("father_name").toLowerCase()).indexOf(e),-1!==o?(a.eq(t).removeClass("hidden"),-1===n&&d(i),n++):a.eq(t).addClass("hidden")}),-1===n?(t.addClass("active"),t.removeClass("hidden")):(t.removeClass("active"),t.addClass("hidden"))}}();